<app-main-layout>
  <etiya-background-template [width]="'100%'" [height]="'53.1rem'"
  >
    <div class="container">
      <div class="row ">
        <h1  [ngStyle]="{'margin':'15px 0 15px 90px','padding':'0 0px 10px 0','border-bottom':'1px solid rgba(0, 0, 0, 0.15)','width':'80%'}">Address Info</h1>
      </div>
      <div class="background d-flex justify-content-around ">

      <etiya-background-template
      class="address-temp"
      *ngFor="let address of addresses"
      [width]="'27.8rem'"
      [height]="'33.7rem'"
      [margin]="'20px 0 0 60px'"
      >
      <!-- <button
        class="menu-button"
        mat-icon-button
        [matMenuTriggerFor]="menu"
        aria-label="Example icon-button with a menu"
        >
        <mat-icon  aria-hidden="false" aria-label="Example home icon" fontIcon="home"></mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button
          mat-menu-item
          [routerLink]="'/customers/address_info/details/' + address.id"
        >
          <mat-icon>edit</mat-icon>
          <span>Edit</span>
        </button>
        <button (click)="onDelete(address.id)" mat-menu-item>
          <mat-icon>delete</mat-icon>
          <span>Delete</span>
        </button>
      </mat-menu> -->

      <div class="dropdown show">
        <a #toggleId class="btn btn-secondary dropdown-icon" (click)="toggleDropdown(address.id)" role="button" id={{address.id}} data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fa-solid fa-ellipsis"></i>
        </a>

        <div [ngClass]="'dropdown-menu ' + getDropdownClass(address.id)" aria-labelledby=address.id>
          <a class="dropdown-item"  [routerLink]="'/customer/create_customer/address_info/details/' + address.id" >Edit</a>
          <a class="dropdown-item" (click)="onDelete(address.id)" >Delete</a>
          <!-- <a class="dropdown-item" >Something else here</a> -->
        </div>
      </div>

      <div class="address-title">
        <div class="address-title-content">{{ address.addressTitle }}</div>
      </div>
      <p class="address-content">
        {{ address.city?.name}} {{ address.city ? "," : "" }} {{ address.street }}
        {{ address.street ? "," : "" }} {{ address.flatNo }}
        {{ address.flatNo ? "," : "" }}
        {{ address.addressDescription }}
      </p>

      <div class="form-check">
        <span>Set as Primary Address</span>
        <input
        class="form-check-input"
        type="radio"
        name="flexRadioDefault"
        id="flexRadioDefault2"
        [checked]="addresses.length === 1"
        />
        <label class="form-check-label" for="flexRadioDefault2"> </label>
      </div>

      </etiya-background-template>

      <etiya-background-template
        *ngIf="addresses && addresses.length < 3"
        [width]="'27.8rem'"
        [height]="'33.7rem'"
        [margin]="'20px 60px 0 0'"
      >
        <div class="d-flex justify-content-center">
          <etiya-button
            [routerLink]="'/customer/create_customer/address_info/details'"
            [ngStyle]="{ 'margin-top': '168.5px' }"
            [buttonType]="'button'"
            [icon]="'fa-solid fa-plus'"
            [buttonColor]="'bg-orange'"
            [buttonText]="'Add New Address'"
          ></etiya-button>
        </div>
      </etiya-background-template>
    </div>

      <div class="row d-flex justify-content-between">
        <div class="col-2 etiya-button-left">
          <etiya-button
            [isDisabled]="addresses && addresses.length >= 3"
            [routerLink]="'/customer/create_customer/demographic_info'"
            [buttonColor]="'bg-gray'"
            [buttonText]="'Cancel'"
          ></etiya-button>
        </div>
        <div class="col-2 etiya-button-right">
          <etiya-button
            [routerLink]="'/customer/create_customer/contact'"
            [buttonType]="'submit'"
            [icon]="'fa-solid fa-chevron-right'"
            [buttonColor]="'bg-orange'"
            [buttonText]="'Next'"
          ></etiya-button>
        </div>
      </div>
    </div>

  </etiya-background-template>
</app-main-layout>
